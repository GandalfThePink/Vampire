# Vampire
A stablecoin build on Uniswap. 

WARNING THIS IS EXPERIMENTAL TECH. IT IS NOT IN A FINAL STAGE AND THE CURRENT VERIOSN IS THE MINIMAL VIABLE PRODUCT. USE CONTRACTS AT YOUR OWN RISK OR STAY AWAY. THIS IS NOT YIELD FARMIN, THERE IS NO MONEY TO BE MADE, NO TOKENS TO BE GIVEN AWAY.

The idea of this project is to build a decentralised stablecoin using a smart contract based on uniswap. We release two tokens, Vials which are designed to be value stable at the price of one dai, and vampries which represent the collateral and thus equate to a long position on eth. We do not have a governenace token, there is no controller of the contract. Everything is done without relying on a special entity. The protocol does not belong to anyone and simply acts based on the code.
The advantage of this approach is that we can create a stablecoin without relying an a big goverancne layer such as seen in maker/dai and neither rely on a central custody such as seen in tether. The protocol is also minimalsitic in the sense that there is only one pool of collateral and not many indiviudal cdps that might need to be liquidated in case of a price drop of the collateral causing significant congestion. 
The basic idea of the protocoll is simple. The contract has a reserve of ethereum tokens. When the price of vials is lower than one dai it will buy some back and burn them to drive the price up. If the price is too high it will mint new tokens and sell them to lower the price and increase the supply. 

# The two token model

A stablecoin is usually created by locking up some collateral, as known from makerdao. This collateral provides the safety and serves as a gurantee to uphold a lower peg on the price. We do not change this basic mechanism. Each Vial issued is sold on the market at a price of at least one dai natrually creating an ether reserve for the contract. If the price of eth would rise the collateral would increase giving the protocoll more influence to enfore the lower price peg by buying back the vials at 1 dai per vial. But as soon as the price of eth would fall the protocll would be undercollateralised and find itself unable to defent the peg of 1 dai per vial. 
This illustrates the need for a second token. Economically when creating syntetic assets between two parties, it is nessescary to have one party loose if the other wins. There is no free money injected into the system nor drained from it by third parties. If we have ether and want to create a syntetic stablecoin, on the flipside we must also create a long position on the collateral such that both positions combined mimick the price of the collateral.
In makerdao, the cdp is effectively an non-tradable long posotion on the collateral, while dai is the resulting stablecoin. If the value of the collateral goes up ownership of the cdp is benefitial as a fixed number of dai can unlock a now more valuable collateral. But if the value of the collateral goes down the cdp will eventually  get liquidated in a debt auction before it is no longer profitable to use the dai to redeem the now worthless collateral. 
We change this system by transforming the collateral cdps into a tradable erc20 tokens that represent ownership of a fraction of the protocolls collateral. This is the vampire token. 
In practice the protocll will compute its collateraisation ratio, targeting a 150% overcollateralisation. If above this value the system is safe from ethereum price movements and no further action is needed. But if below 150% the protocll will mint new vampire tokens and sell them on the market to raise additional funds. It is important to note that this does not dilute the existing vampire holders as the new tokens are backed by the newly aquired ethereum.
While a maker cdp provides an individual leverage, vampire tokens are flexiby leveraged. The higher the overcollateralisation the lower their leverage. In the theoretical limit infinite overcollateralisation vamprie tokens simply represent eth at a levereage of 1x. At the target value of 150% they are 2x leveraged. Since the overcollateralisation changes dynamically the leverage of vampires will vary in time. Note that will the issue of new vampires does not dilute the value of existing vampires, it will lower the leverage of vampire tokens.

# Vitrual liquidation

At a value below 100% overcollateralisation the assets can no longer fully garantee the peg of the vials. In this case a maker cdp would be liquidated. We choose to go a different route that is experimental. We allow the protocll to temporarily run under 100% collateralisation and continue to issue a large amount of new vampire tokens trying to regain the collateral. At this point vampires should become very cheap and this effectively equates to a liquidation. But the price should remain above zero since a move up in the value of eth will provide a huge leverage to the upside. Hopefully the protocoll will quickly return above 100% collateralisation, but the exact dynamics remaisn to be seen. Afterall this is an experiment to try new ideas. 
The protocll will become increasingly unstable the lower the collateralisation will fall. This is why we have implemented an eventual rebase. If the collateralisation falls below 80% the Vials holders will loose vials using a rebase machanism until their new value of vials agian matches 100% of the collateral. This effectively menas that the stability of the stablecoin is broken and instead it falls just like the supplied collateral. 

In the space of syntetic assets many rules can be implemented. We have choosen to build a stablecoin that is not 100% stable. It behaves as a stablecoin as long as there is enough collateral, but eventually falls with the value of the collateral. This problem is a fundamental problem of syntetic assests. One can never gurantee more than there is collateral. 
Syntetixs tries to avoid this by trying to maintain 750% overcollateralisation but this severly limits the liquidity that is available. Makerdao uses liquidations and will compensate users by printing more maker tokens in case. Our design is different from those with its unique advanatges and challanges. 
While our stablecoin vials underperforms a perfectly value-stable asset, vampires overperforms a usual long position. This is because the system is a two-party system. It is a long position that will suffer heavily from price losses in ethereum, but never gets fully liquidated. Ideally this would be compensated by an interest payment from vampire holders to vial holders, but it is not clear what a good rate is so we choose to make the protocol more minimalsitic and accept the slight assymetri in the assets. There are several ideas on how to imporove this in v2.


# Callable fucntions
Normal users never need to call any fucntions. They simply buy/sell vampires or vials on uniswap. These fucntion are there to understand how it works and to maintan the system. All fucntions can be called by anyowne wanting to do so. 

BLOOD RITUAL: This is the main function of the protocoll. It first updates the uniswap vwap price oracles. Then it computes the collateralisation and mints new vampires as required. It then check the price of a vial and buys them back on uniswap or issues new ones and sells them to bring the price to 1 dai. If the collateralisation is critial it will rebase the Vials and bringt the protocll back to stability.
It also sends some free vampires to the caller of the function to compensate gas fees and incentivse the regular calling of this fucntion. The vampires dilute the vampire pool at less than 1% per year. This seems fair given that vampires are a bit better than a regular long as explained above. 

GET DARK ENERGY: This fucntion simply return the collateralisation of the protocoll in permille. Target value is 1500

SILVER BULLET: This fucntion allows vampire holders to burn their vampires and redeem their share of the collateral. It can only be called at a collateralisation over 200% since we do not want collateral holders to leave the protocoll undercollateralised. At lower values one can exit by market selling or the following function

BLOOD GARLIC: This fucntion destroys an equal amount of vials and vampires and releases corresponding protocoll funnds. It can always be called and game theretically provides an lower bound on the combined value of Vials and Vampries to equal at least the ether reserves. 

ETHER RITUAL: This function allows the creating of both new vials and vampires by paying ether to the contract. It can only be called above 150% collateralisation. In this case it provides an upper bound on the combined value of Vampires and Vials. 

# shortcommings and ideas for v2

We have avoided a governance layer on purpose and want to test how this minimal model performs first. Everyhting the protocoll does is hard coded with zero wiggle room. This means that we have set a lot of constants in the code and we are not sure if those are ideal or would even need to change in time. One example is the reward for calling the blood ritual. If there is significant value locked up 1% per year may be far exceed the transaction fees. Another important example is an interest rate for Vial holders, or liquidity incentives such that the protocll can change the price in a meaningfull way. 

We intend to add a second version with a new model of fair governance. In this model the issuance of governenace tokens is exponentially increasing such that old holders are diluted. The goal is to give the power to recent users of the protocll and not to generate a quick yield farming hype. Holders can then be rewarded for the total value of the protocol such that their incentive is to attract as much use as possible. 
The governance should be limited, only able to set some key varaibles but not change the protocoll entirely. It has been shown that in such a case governance will always try to limit the issuance of new tokens. Having a governance we can set a savings rate and much more. 

Furhtermore we are unhappy basing the protocll only on dai. We aim to create a coin that is free from politics but dai itself is contolled by maker. Firthermore dai may fail and loose its peg. We aim to add more oracles, and give the controll over those to the governance of the protocoll. We currenty plan to have three oracles and always use the median. Then one can fail and be replaced by the governance. 

Finally for the long term we intend to add more sytetic assets, not just the usd. But lets first see how this goes. 
